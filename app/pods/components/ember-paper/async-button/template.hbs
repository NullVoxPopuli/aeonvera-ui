{{#paper-button
  onClick=(action 'onClick')
  raised=raised
  warn=warn
  primary=primary
  }}

  {{#if task}}
    {{#if task.isRunning}}
      {{loadingMessage}}
    {{else}}
      {{label}}
    {{/if}}

  {{else}}

    {{#if promise}}

    {{#unless (is-pending promise)}}
   {{#if (is-rejected promise)}}
     rejected! :(((
   {{/if}}
 {{/unless}}
    {{log (get (promise-rejected-reason promise) 'message')}}
      {{#if (is-pending promise)}}
          {{loadingMessage}}
      {{else}}

        {{#if (is-rejected promise)}}
          {{#if showError}}
            Error! :-(
          {{else}}
            {{label}}
          {{/if}}
        {{else if (is-fulfilled promise)}}
          {{successMessage}}
        {{else}}
          :-\
        {{/if}}

      {{/if}}

    {{else}}
      {{#if icon}}
        {{paper-icon icon}} {{label}}
      {{else}}
        {{label}}
      {{/if}}
    {{/if}}

  {{/if}}
{{/paper-button}}
