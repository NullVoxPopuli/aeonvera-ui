---
language: node_js
node_js:
  - "4.3.1"

sudo: false

addons:
  code_climate:
    repo_token: a267a66fea342c45c32ff52fb93592b70d9a2919ef2953b9261006aaa8e38348

cache:
  directories:
    - node_modules

before_install:
  - export PATH=/usr/local/phantomjs-2.0.0/bin:$PATH
  - "npm config set spin false"
  - "npm install -g npm@^2"

install:
  - npm install -g bower
  - npm install -g jscs
  - npm install -g jshint
  - npm install -g codeclimate-test-reporter
  - npm install
  - bower install

before_script:
  - "export DISPLAY=:99.0"
  - "sh -e /etc/init.d/xvfb start"
  - sleep 3 # give xvfb some time to start

script:
  - npm run ci

after_script:
  - codeclimate-test-reporter < lcov.dat

notifications:
  email: false
